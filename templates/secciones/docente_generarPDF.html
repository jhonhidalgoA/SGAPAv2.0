{% block title %} M. DOCENTE | SGAPA {% endblock %}
{% block extra_css %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/docente_generarPDF.css') }}">
{% endblock %}
{% block content %}
<div class="cv-container">
    <div class="watermark">DOCUMENTO GENERADO AUTOM√ÅTICAMENTE</div>
    <div class="header">
        <div class="header-content">
            <div class="institution-info">
                <div class="institution-logo">
                    <img src="../../static/img/logoColegio.png" alt="Logo del Colegio">
                </div>
                <div class="institution-name">INSTITUCI√ìN EDUCATIVA SGAPA</div>
                <div class="document-title">HOJA DE VIDA DOCENTE</div>
                <div class="name" id="fullName">{{ docente.first_name }} {{ docente.last_name }}</div>
            </div>

            <div class="profile-section">
                <div class="photo-container">
                    {% if docente.photo_path %}
                        <img src="{{ url_for('static', filename=docente.photo_path) }}" alt="Foto del Docente" class="photo">
                    {% else %}
                        <div class="photo-placeholder">Foto del<br>Docente</div>
                    {% endif %}
                </div>

                <div class="basic-info">
                    <div class="info-item">
                        <span class="material-symbols-outlined">mark_email_read</span>
                        <p class="sub-title">{{ docente.email }}</p>
                    </div>
                    <div class="info-item">
                        <span class="material-symbols-outlined">settings_phone</span>
                        <p class="sub-title">{{ docente.phone or '+57 000 000 0000' }}</p>
                    </div>
                    <div class="info-item">
                        <span class="material-symbols-outlined">id_card</span>
                        <p class="sub-title">{{ docente.document_number }}</p>
                    </div>
                    <div class="info-item">
                        <span class="material-symbols-outlined">calendar_month</span>
                        <p class="sub-title">Registrado: {{ docente.registration_date.strftime('%d/%m/%Y') }}</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="content">
        <div class="section">
            <h2 class="section-title">Informaci√≥n Personal</h2>
            <div class="info-grid">
                <div class="info-card">
                    <div class="card-title">Fecha de Nacimiento</div>
                    <div class="card-value" id="birthDate">
                        {{ docente.birth_date.strftime('%d/%m/%Y') if docente.birth_date else 'No especificado' }}
                    </div>
                </div>
                <div class="info-card">
                    <div class="card-title">Edad</div>
                    <div class="card-value" id="age">{{ docente.age or 'Desconocida' }} a√±os</div>
                </div>
                <div class="info-card">
                    <div class="card-title">G√©nero</div>
                    <div class="card-value" id="gender">
                        {% if docente.gender == 'masculino' %}
                            Masculino
                        {% elif docente.gender == 'femenino' %}
                            Femenino
                        {% elif docente.gender == 'no_binario' %}
                            No Binario
                        {% else %}
                            Desconocido
                        {% endif %}
                    </div>
                </div>
                <div class="info-card">
                    <div class="card-title">Lugar de Nacimiento</div>
                    <div class="card-value" id="birthPlace">{{ docente.birth_place or 'No especificado' }}</div>
                </div>
            </div>
        </div>

        <div class="section">
            <h2 class="section-title">Informaci√≥n Profesional</h2>
            <div class="professional-section">
                <div class="info-grid">
                    <div class="info-card">
                        <div class="card-title">Profesi√≥n</div>
                        <div class="card-value" id="profession">{{ docente.profession or 'No especificado' }}</div>
                    </div>
                    <div class="info-card">
                        <div class="card-title">√Årea de Especializaci√≥n</div>
                        <div class="card-value" id="area">{{ docente.area or 'No especificado' }}</div>
                    </div>
                    <div class="info-card">
                        <div class="card-title">Escalaf√≥n</div>
                        <div class="card-value" id="scale">{{ docente.scale or 'No especificado' }}</div>
                    </div>
                    <div class="info-card">
                        <div class="card-title">N√∫mero de Resoluci√≥n</div>
                        <div class="card-value" id="resolution">{{ docente.resolution_number or 'No especificado' }}</div>
                    </div>
                </div>
            </div>
        </div>

        <div class="section">
            <h2 class="section-title">C√≥digo de Empleado</h2>
            <div class="code-display" id="employeeCode">
                {{ docente.code or 'DOC-XXXX-XXXXX' }}
            </div>
        </div>
    </div>

    <div class="footer">
        <div class="footer-info">
            Documento generado autom√°ticamente el <span id="genDate">{{ today }}</span><br>
            Sistema de Gesti√≥n Administrativa y Procesos Acad√©micos - Versi√≥n 1.0
        </div>
        <div class="qr-placeholder">QR Code<br>Verificaci√≥n</div>
        <br>
        <button class="generate-btn" onclick="generatePDF()">üìÑ Descargar PDF</button>
    </div>
</div>
{% endblock %}
{% block extra_js %}
 <script>
        // Funci√≥n para generar c√≥digo de empleado √∫nico
        function generateEmployeeCode() {
            const year = new Date().getFullYear();
            const random = Math.floor(Math.random() * 900000) + 100000;
            return `DOC-${year}-${random}`;
        }

        // Funci√≥n para simular generaci√≥n de PDF
        function generatePDF() {
            alert('üéâ ¬°Hoja de Vida generada exitosamente!\n\nCaracter√≠sticas del CV generado:\n\n‚Ä¢ Formato profesional institucional\n‚Ä¢ C√≥digo de empleado √∫nico\n‚Ä¢ Informaci√≥n completa del docente\n‚Ä¢ Dise√±o moderno y limpio\n‚Ä¢ Listo para imprimir o compartir digitalmente\n\nEn un sistema real, esto descargar√≠a un PDF.');
        }

        // Funci√≥n para poblar datos desde el formulario
        function populateCV(formData) {
            document.getElementById('fullName').textContent = 
                `${formData.nombres} ${formData.apellidos}`;
            document.getElementById('email').textContent = formData.email;
            document.getElementById('phone').textContent = formData.telefono;
            document.getElementById('docNumber').textContent = formData.documento;
            document.getElementById('birthDate').textContent = formData.fechaNacimiento;
            document.getElementById('age').textContent = formData.edad + ' a√±os';
            document.getElementById('gender').textContent = formData.genero;
            document.getElementById('birthPlace').textContent = formData.lugarNacimiento;
            document.getElementById('profession').textContent = formData.profesion;
            document.getElementById('area').textContent = formData.area;
            document.getElementById('scale').textContent = formData.escalafon;
            document.getElementById('resolution').textContent = formData.resolucion;
            document.getElementById('employeeCode').textContent = generateEmployeeCode();
        }

        // Actualizar c√≥digo de empleado al cargar
        document.addEventListener('DOMContentLoaded', function() {
            document.getElementById('employeeCode').textContent = generateEmployeeCode();
            
            // Actualizar fecha de generaci√≥n
            const today = new Date();
            const options = { year: 'numeric', month: 'long', day: 'numeric' };
            document.getElementById('genDate').textContent = 
                today.toLocaleDateString('es-ES', options);
        });
    </script>
{% endblock %}

{% endblock %}